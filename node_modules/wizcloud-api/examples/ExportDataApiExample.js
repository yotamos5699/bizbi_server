////////////////////////////////////////////////////////////basic required code 
//Must to configure private data on apiConfig.js file
const wizlib = require("wizcloud-api");
//var express = require("express");
//var router = express.Router();
var fs   = require('fs');
var myObjData;
			try{
				myObjData=JSON.parse(fs.readFileSync('apiConfig.js'));
			}catch(e){ //no config file take from fs
				console.log(e);				
      }
var myDBname=myObjData.WizcloudApiDBName;
wizlib.init(myObjData.WizcloudApiPrivateKey, myObjData.WizcloudApiServer);
let params_data=[];
let encrypt_reportData='';
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//Encrypted report data from "External" option in report issue

encrypt_reportData = '0c61e292d66a71326e011b089534ee1491859e1b25cb2e1998a256873bb2fe1f2af4641406d1837d8fac65447a132dd84ec8103d602b7b706c90aec4faeab8cc8f160050034585838af42d839c84d8b6bfebb5ae9f2ec6959f64245f91f8415d5535fbb8b50285a9b2935af6450788312bd1db47cbfa3a328731e3e0b9328b8ab9813dc4ea9322aaa322480ea8e47b7f3dc41512e0d8b8b2940840d9176fef890c2aa8d1dc554ca47887df8986a74b0e01c360205805dc9d4c6619d2d9fd6e6c572ab84861bbf6afc8b72e869815cc7cb01fd75e7d116f37dfaa871e1e24934036194f2f79606ee601f913d44dacaecfd44257d5af883e2722db103e9b05b1ba94ca0406bab549e44c07f4916ce90e9ce8adf6478584568e7d13f0dbe0d46a4b77035ae256764eba7f2ce4f6ffe9607af530baf9bffef193a56342e38ee177d3a85efad74a5a5b97653df7477221c2bbf102ca2133738ae698c6715007aaf9cd076f0b371bcc03ebab58987032b803c40495a512528b9f0e66ef3ab561ec9c827f7be3329e343701536c5c0dbae4d773983c7a571421e5c0f3bacc33fb809796a47e6542e4aecc365bbeac53777947896592a298370403100586a0a649a3676808aa89277254bc3d73cc4cfb104b0945467020a61623138e61ab2805ee0afc4e92f8dcbdcdf54cad989e15231c9fd4308aeda2634cbb4d32298e445bc91c1c4f31c53fff82049d561360b41307790ee924d1303782fd9b7eefc419642e8d40c92eec87e0a608c03ac527cfd6fcf70f96f63a20b9a284a95fe6e9ceceef444af74e27d5026568df2ea6ba01a439c70af4f5f3f438e931878d03004b81014e55af228a56856f27ee6e079c82b403e980abf9efa8ccd13bd02526701520b8613206f76b6b19fd2f03e3e2b0653c2a04eac039401f033bb620478b3d1a33f812e99eed628c2eba3cd13909c7aff9ebe3f81060e3f620012b5b628a9dacc697037b5294bc15cc7ab2410432bf7291fe432b525770e844c5eb9845791dcec9921ee53053f513663786adc06cff1671551d04d8fdfcaef076769e4502d656ffcba81c02718544cbb9539316979a4160b2fecc3bee97997b811736d47353aef2c5fe3380448bcdf80ce7b66abe49e951c04bba16f83556f3bc1b03eb50c06c723e86be9ec7693ddcae8bd883f7116b345bd78c3d9c04e713d2772ca3002a841897b0fb55d49c1e9bf87462261e58fc3110469f9c6f0503b18ffda60224361f2e6b826258140f97e750ed8a2ab2ae6dc34a3dad005dda9c21deb8a5169770b3bc2ff1ab6ab7602361ca700b7eb6b53e14615e8918d06ffb5654ea74a4d9fe83265ed9695092a3e1e71fee12d36cc1731b947dd02817cc4acff30a28ee9d8e3674bc52c1ae4e282da6fea77ccb9c188d7146ca69d750de369fdbd47b1db34ee661f24601ad06876db8334e8ac705869191afca4038fe0fd7aebaebd9cc7af9a695990c6397376bc27d5f12abafca8707dc7cbdab63e90466c524e8336c90cfa01b5583cb28e5991c0b66bc26d28bd47a2fcde8f335e130c7c40eb22c362366769dc9249bf9c710ac6c7e74f01a6a1df1592075862ff12d4562c489ba76c941994aa8d910ba4c11db55db48d466d91ae208a570ad785f63fa4076eaec445326f299e047ac849b1e1b4bdab737b49789623c66de3f5f62ef32c9d7547822ceb9cbafe86d6dc5641d26a806d737f786786c0618e7604ce0f80739684c02a9fb94ab97bc034552b42fb73230d1acb50831794e1f81646d04b34af374d3ea61142cae1e8efd0dd5a8a8f88699d749487de58532b4c9c791da27bb21a17a05e3bf084d6b0a5c1e3a47b7043ceae7e7855f414e06a6797a26ea80e121fc4ddb6e11ef73fa3bd18bb1f2f00c514babe38e87a9df66cfa63cb4ab9416a0becec9d5ce47ad9d598ba60ed719ceb8d28c95eab054b475d1b13832c5d614d3f51e8cc325616046dc445f12c49f0ca902e984a830ed13cf3934917c9e9248e2c475c91e3991787d64affc6dce9537392fbdb61d3b7afa035d2ecd30f60e18f97e1c900facc4b59ac132bed9c15323850f7ae932f4191bf297280da38c272fed663469258497613ffe53aa69969529e2553d18ab8d756806072177fefa3167fdd206d81c9e76e0dc9a8232ee8243a4ba633e9943bff79be8dba774ca8129a9c3d86eb2bbcfaa38a8bd47b9190dc3e09332d196f8ce09b4e575bb8dd6839eab1078260c49aa26a86ab173c6c9fe2fcc921f00fd54249bf4c650c65099063024be587a2413e16f66086f50d004d190ed7e17ae0c20c78ba802873b1f40378d51c874099d810a6f5389a4396377fa4d04978adcf25f6c563be588b130f67ac66dc4da53ad4f9916b2b79747eaa1ace7ca0b364f153dbf1d4d9fecfec39bee9ddb3c68e55c91e1a8d8af9bad8f53a30ef6e7f8c94ba133ec58187f0d51c6011dadd4f57b4be53fd902d5a9b50d15c04405fa8eafc4fefd80d6774df9db93416b9460350d9d941895025ede7c91267004499a58efcda779db2b3bc18da3b1d2b633af45c62d1e0afcbed284485ab79125ec7563f9a722749a2b4ea3582037135b4faa354d486f67fd82350f48602e4379f12a6e53288bed8a37f5eb7503e5770fc93a57e6f03ec79173c779a2b8551417155296b0de6c89f8c8edc0a13b7f99ce90a24bea1f3ad2ebda6b0fd94b2e020eb4dc4ee238ea316cd10d5491aee33a4095e8add80151628f7dc75c289af50b0cef2b4bfd55b7f3462f512e1914727d482a7e58da145269eeeca1480a2610fb336c19e53253133c1844189b13003a1c0eac7bcfa0a9d5da750b2ce72031fb7644122854083190f178716c88e4e9550eb03c2e20fa610ab58cb90ac1dfd792f3aace02a5135a216bb0c8db827a7a40ea0f03fb3b7e74f6171cfaad3424b44d07fc1e38bfd3b9230bdaa33f38a252440c15d3ac0e704c4006af152d90363f34a832be17a070054f83185fec27d461235814db58156da2bc1b6592547449a171e90a5e0cb89955926d25ff5a297f01139cf665121107b2e2e2ad4161d0c810e273b8037c2c902e3dd16210aed906eafa7ad73fd29cae0c0b5955a4eadbf65e8cc604967cd19b86924494ccc7ec0751df8eee40417d98b6629dc206d5cfed100cc6c3526ec5a772626806f4ec75f4aa740e410aeb92ec5ece5945b7a99935627530f45fe8cad4fd33ce4e787197ffcca92b6f1ff8bc5e1eb55594629bfcfdf6739cb015eeb1d0f983035bf2e84f68544553491bedb0838c7125634422ed9ecd166b93bff223bcfc4ef14f053d5b6629e06fa72af5c9cefb4f0cc7336e03ee2f413f33e94c16eeec8ea7ecbb91ae7afd0512251a878fc76f20eb7077c12c748692140d100de2cf7327596f7d680675abe1c9cbbffecbad99461b66a3bcb616ea493789483644710f4398cb54596be137b7b9ae688d0dde9560521930ef348e90095d3e2e7b667393b1e5414db43f16f2d2760e9a18e1aad1ec6723dc53288e7f024a595bfb48dd277ef89a8e654a6530bb8c79f9b09a7d7f40449ba1da309597e13488307d657e3f922b1f06f28f531a5df5220aeac09cd51abe79c896fa578e38dd0d3e156e43ce9485633d572da2098f7755d167d58ea36cce6ba9e5248a8fcfc05a53567eb7146eb8d74183eaaabe5a6b35b955fe2310c4c62cda975e220bd3fcccab5b4b4f64b8d70b48c3dbf43797da6811989fe42e2ef495a01655e37c08365a4d19c68303099ea85f7461eba3cbc9cea2c0c135dac8cf163a2910ab94dec8fac765c98fd3499d8920915d102b8a6cff4f5cb98cd9fb076a7432c537914894e76f4a65a9063b68fb4eb39d8d1df14d14db8907b41aa8ecd04759b1038895470edd5332bb108af710bc2d36451ebb451201ea3dd5c9493e274d8d5a5dc88d60b049b1fab9bb091c90e9719ce054953d175ff432278d0decdedb07f657e5e82aa698a75ccaa577b043f614bd63f2a0ab99a68c2255b45c98fa68f9fc3d278e818b02f2f45f4b4dc9fd3c7f8e35bd20f61e9db13d93f281aae2be0f39145c58423b11fd06d7d5e662678f58771811110fda5336820280ef08bf45287655cc000e11ec804d78daaf05b18394d5f93e3933c71c09440d2deb6819391076eedeee69effe91ddfbce3b6919105e914154eeea1f1beeb2bc89d5e0f3f819fffc6f6e93ac7d10a522763a8a9499ae2ac8f824bd0f42374a5f40eb54b2805b6751a86cb39e72690433f529086022d9fd22fb8fb06f5f27a0dec4eab3f341af80d3af8368fe32fcbc2d023b823044d9c9bf0170325b599e44724db70ef3fc3aad043f6a5546cefa3e0a92c6e956113a4a44eacf10216f567f58b97cbb450155caf7e3f5655f750d2b2811a3e95c15e95a69923240297251ad176446bebd6df54fe7376af397466ab7b42323164adbf41c10eb41f0fc93def5bc77dbbe876f2962a00725af791ad67a56b708dc69b45ccf9a7bcf7b29e0068109a886153c266e218ddc761251f47154e4cd1a496e9d30c72742e1b01eecfe9bbb8f1cf118b563d23c6e14011e84a3bf9ae801c80b40fc54f31edd5e5a1b56146480816b5f45af0dfaa3cc2c7dffcf8903e2fe0d4faf412b29c9f382a345cc24839b07d48366de3e3f1972ab757326a87a22ad4bb8687796bdeb0a5122504b8d3b75dfe1c4ce219a62c4e7414fc10be85a4c156dd70639b2be8d4f5dbdb531199c5e65776b7af0acc4688786e63d48eff175885383f8d55040fae2aa500b8e2513e66ba048dd091ad9d7d9111ed1efb41bcbd7ab867a89c94baf08af6f29939a71494b01ec13cb3f3e803e8b1b69f267801c512b0c1394cbc5a93f5af7c6d4b3c2f16c598f9a3d7a22c043f6e3b6786e1851ef46ad77c71d104ef78054a70f3ffe33233e7c2bfca78a5e272dda18ec4b4d8dd364015bb9874cab37d3d6a1e3f6a70b383601e73f37be4dec10b136d618752ed365771caa1edf5d654dbe3f06da3e4bf659c31bc459e0cbcf8ac59a06f6e18d8a6c601e64454af8965704513e48cb34ed568c98f83032a28bba2f38d79bd94e5b5caab1c7a8306265bd58e4fe13923d312bf8636fd6a25af4d5326cb666e973155a89598f3ab167b46cec6564abe925f6b0db1a2a8cc833e132b207dc5b37f2247f92b98eb5d52b82cfcebff83be312900bab610f542eb354fb7fb61ef8a03aa74b9d6230e072c618b1ffa183b854b1a8375c279dd912d449ab8bc0653975c4469c809c3859fa983c16cfe2f7cd5e9f1e3128d805323fa1a4ec2bc6533959219c8f6c904df24764d75d3c8e51438fbac1797074d32b522aa53151cfbdef8b9337ff01f0dcb2918a54457cf350cfaf4d37fcbd2e526cc6a2b33eac3941c68ab55f40c7b3b86e8abebf9e2b4469bc7bfaf6aa338c072ef776b0bd9a57cf9abe66b266ca6fb47fdd03df27bf6b4587be705db805d8e2bec39c00197846d028b646a4d27a8c465521cef78e8da7a5106d2e04f28f054976eba542c60989195a5fd3dafc45a9a3f06e805b7c0373439ad760a6e4b273ea85ac7251';

params_data=[{"p_name":"__MUSTACH_P0__","id":"0","type":"txt","name":"חתך/דפי בנק/מפתח חשבון בנק","defVal":"'777'","opName":"מ..עד","opOrigin":"from"},
{"p_name":"__MUSTACH_P1__","id":"500","type":"txt","name":"חתך/דפי בנק/מפתח חשבון בנק1","defVal":"'777'","opName":"מ..עד","opOrigin":"to"}];

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//Api methods

async function exportDataRecords(){
	let apiRes = await wizlib.exportDataRecords(myDBname, {datafile:encrypt_reportData, parameters:params_data });
	console.log(apiRes);
	fs.writeFile('myApiRes.txt', JSON.stringify(apiRes), (err) => {
    if (err) throw err;
		console.log('See resaults in myApiRes.txt');
	});
}

exportDataRecords();

/*
router.get("/", async function(req, res) {
	let apiRes = await wizlib.exportDataRecords(myDBname, {datafile: encrypt_reportData, parameters:params_data  });
	res.json(apiRes);
});

module.exports = router;
*/